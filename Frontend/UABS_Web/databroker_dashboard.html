<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>UABS - Data Broker Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<header class="main-header">
    <h1>Universal Appointment Booking System (UABS)</h1>
    <p class="tagline">Data Broker Dashboard â€“ View aggregated business reports.</p>
</header>

<nav class="top-nav">
    <a href="index.html">Home</a>
    <span class="nav-label">Logged in as: Data Broker</span>
</nav>

<main class="page-container stacked-dashboard">

    <!-- Data broker profile -->
    <section class="card">
        <h2>Data Broker Profile</h2>

        <div class="profile-grid">
            <div>
                <strong>Full Name:</strong>
                <span>Acme Analytics</span>
            </div>
            <div>
                <strong>Contact Email:</strong>
                <span>reports@acmeanalytics.com</span>
            </div>
            <div>
                <strong>Phone:</strong>
                <span>+1 (555) 222-3344</span>
            </div>
            <div>
                <strong>City:</strong>
                <span>Columbus</span>
            </div>
            <div>
                <strong>Country:</strong>
                <span>USA</span>
            </div>
            <div>
                <strong>Purpose of Data Access:</strong>
                <span>Analyze appointment trends for local healthcare providers.</span>
            </div>
            <div>
                <strong>Access Status:</strong>
                <span class="status-badge status-pending">Pending</span>
            </div>
        </div>
    </section>

    <!-- Filters + reports -->
    <section class="card">
        <h2>Business Reports</h2>

        <!-- Filter form (wired to dataBrokerReports servlet) -->
        <form class="filter-form"
              action="dataBrokerReports"
              method="get"
              id="reportFilterForm">
            <div class="form-group">
                <label for="filter_business">Category</label>
                <input type="text" id="filter_business" name="filter_business"
                       placeholder="e.g., Dental, Hair">
            </div>

            <div class="form-group">
                <label for="filter_city">City</label>
                <input type="text" id="filter_city" name="filter_city"
                       placeholder="e.g., Columbus">
            </div>

            <div class="form-group">
                <label for="filter_country">Country</label>
                <input type="text" id="filter_country" name="filter_country"
                       placeholder="e.g., USA">
            </div>

            <div class="form-group">
                <label for="filter_start_date">Period Start</label>
                <input type="date" id="filter_start_date" name="filter_start_date">
            </div>

            <div class="form-group">
                <label for="filter_end_date">Period End</label>
                <input type="date" id="filter_end_date" name="filter_end_date">
            </div>

            <div class="form-group">
                <label for="filter_min_appointments">Min. Appointments</label>
                <input type="number" id="filter_min_appointments" name="filter_min_appointments" min="0">
            </div>

            <div class="filter-actions">
                <!-- type="button" so the page does NOT reload; JS will handle demo filtering -->
                <button type="button"
                        id="btnApplyReportFilters"
                        class="btn btn-small btn-accent">
                    Apply Filters
                </button>
                <button type="button"
                        id="btnClearReportFilters"
                        class="btn btn-small btn-outline">
                    Clear
                </button>
            </div>
        </form>

        <table class="uabs-table" id="businessReportsTable">
            <thead>
            <tr>
                <th>Category</th>
                <th>City</th>
                <th>Country</th>
                <th>Report Period</th>
                <th>Total Appts</th>
                <th>Completed</th>
                <th>Canceled</th>
                <th>No-show</th>
            </tr>
            </thead>
            <tbody>
            <!-- Example aggregated rows by category -->
            <tr>
                <td>Dental</td>
                <td>Columbus</td>
                <td>USA</td>
                <td>2025-01-01 to 2025-03-31</td>
                <td>200</td>
                <td>155</td>
                <td>25</td>
                <td>20</td>
            </tr>
            <tr>
                <td>Hair</td>
                <td>Columbus</td>
                <td>USA</td>
                <td>2025-01-01 to 2025-03-31</td>
                <td>80</td>
                <td>60</td>
                <td>10</td>
                <td>10</td>
            </tr>
            </tbody>
        </table>
    </section>

    <!-- Messages -->
    <section class="card">
        <h2>Messages</h2>
        <p class="hint">
            View messages related to your data access and send new ones to admin or support.
        </p>

        <!-- Messages table -->
        <table class="uabs-table" id="messagesTable">
            <thead>
            <tr>
                <th>Date</th>
                <th>From</th>
                <th>To</th>
                <th>Subject</th>
            </tr>
            </thead>
            <tbody>
            <!-- Example row -->
            <tr>
                <td>2025-11-10</td>
                <td>Admin</td>
                <td>Acme Analytics</td>
                <td>
                    <button
                        type="button"
                        class="link-button msg-subject"
                        data-body="Your data access request is under review. We will notify you once it is approved or rejected.">
                        Data access request received
                    </button>
                </td>
            </tr>
            </tbody>
        </table>

        <!-- Message detail panel -->
        <div id="messageDetailPanel" class="card-subsection hidden">
            <h3>Message Detail</h3>

            <p><strong>Subject:</strong> <span id="detailSubject"></span></p>
            <p><strong>From:</strong> <span id="detailFrom"></span></p>
            <p><strong>To:</strong> <span id="detailTo"></span></p>
            <p><strong>Date:</strong> <span id="detailDate"></span></p>

            <div class="message-body-box">
                <p id="detailBody"></p>
            </div>
        </div>

        <!-- Send new message -->
        <div class="card-subsection">
            <h3>Send a New Message</h3>
            <form id="messageForm"
                  class="form-layout"
                  method="post"
                  action="dataBrokerMessages">
                <div class="form-grid-2col">
                    <div class="form-group">
                        <label for="msg_recipient">
                            Recipient <span class="required-star">*</span>
                        </label>
                        <input
                            type="text"
                            id="msg_recipient"
                            name="msg_recipient"
                            placeholder=""
                            required
                        />
                    </div>

                    <div class="form-group">
                        <label for="msg_subject">
                            Subject <span class="required-star">*</span>
                        </label>
                        <input
                            type="text"
                            id="msg_subject"
                            name="msg_subject"
                            required
                        />
                    </div>
                </div>

                <div class="form-group">
                    <label for="msg_body">
                        Message <span class="required-star">*</span>
                    </label>
                    <textarea
                        id="msg_body"
                        name="msg_body"
                        rows="3"
                        required
                    ></textarea>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-accent">Send Message</button>
                </div>
            </form>
        </div>
    </section>

</main>

<footer class="main-footer">
    <p>&copy; 2025 UABS Project</p>
</footer>

<script src="js/main.js"></script>
</body>
</html>
